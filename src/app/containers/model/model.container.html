<mat-card class="model-content">
    <mat-tab-group backgroundColor="primary" color="accent">
        <mat-tab label="Single Point">
            <form class="form" [formGroup]="modelForm" (ngSubmit)="onSubmit()">
                <div class="form__control-group">
                    <div class="form__column">
                        <mat-card-title>Satellite</mat-card-title>
                        <div class="form__row">
                            <mat-form-field floatLabel="always" class="form__field form__field--wide">
                                <mat-label>Object Type</mat-label>
                                <mat-select formControlName="objectType">
                                    <mat-option *ngFor="let type of objectTypes" [value]="type" [disabled]="type === 'geometry file'">
                                        {{type === 'plate' ? 'plate (one sided)' : type}}
                                    </mat-option>
                                </mat-select>
                                <mat-hint>select satellite shape</mat-hint>
                                <mat-error *ngIf="modelForm.controls.objectType.invalid">{{getErrorMessage('objectType')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field *ngIf="showDiameter" floatLabel="always" class="form__field">
                                <mat-label>Diameter (m)</mat-label>
                                <input matInput type="number" formControlName="diameter">
                                <mat-hint>diameter of satellite in meters</mat-hint>
                                <mat-error *ngIf="modelForm.controls.diameter.invalid">{{getErrorMessage('diameter')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field  *ngIf="showLength" floatLabel="always" class="form__field">
                                <mat-label>Length (m)</mat-label>
                                <input matInput type="number" formControlName="length">
                                <mat-hint>length of satellite in meters</mat-hint>
                                <mat-error *ngIf="modelForm.controls.length.invalid">{{getErrorMessage('length')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field *ngIf="showArea" floatLabel="always" class="form__field">
                                <mat-label>Area (m<sup>2</sup>)</mat-label>
                                <input matInput type="number" formControlName="area">
                                <mat-hint>flat plate area in meters squared</mat-hint>
                                <mat-error *ngIf="modelForm.controls.area.invalid">{{getErrorMessage('area')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field *ngIf="showPitch" floatLabel="always" class="form__field">
                                <mat-label>Pitch (deg)</mat-label>
                                <input matInput type="number" formControlName="pitch">
                                <mat-hint>pitch angle of satellite in degrees</mat-hint>
                                <mat-error *ngIf="modelForm.controls.pitch.invalid">{{getErrorMessage('pitch')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field  *ngIf="showSideslip" floatLabel="always" class="form__field">
                                <mat-label>Sideslip (deg)</mat-label>
                                <input matInput type="number" formControlName="sideslip">
                                <mat-hint>sideslip angle of satellite in degrees</mat-hint>
                                <mat-error *ngIf="modelForm.controls.sideslip.invalid">{{getErrorMessage('sideslip')}}</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form__column">
                        <mat-card-title>Ambient Conditions</mat-card-title>
                        <div class="form__row">
                            <mat-form-field floatLabel="always" class="form__field">
                                <mat-label>Temperature (K)</mat-label>
                                <input matInput type="number" formControlName="temperature">
                                <mat-hint>atmospheric temperature in Kelvin</mat-hint>
                                <mat-error *ngIf="modelForm.controls.temperature.invalid">{{getErrorMessage('temperature')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field floatLabel="always" class="form__field">
                                <mat-label>Speed (m/s)</mat-label>
                                <input matInput  type="number" formControlName="speed">
                                <mat-hint>speed in meters/second</mat-hint>
                                <mat-error *ngIf="modelForm.controls.speed.invalid">{{getErrorMessage('speed')}}</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="form__parent-label">Composition</div>
                        <div class="form__parent" formGroupName="composition">
                            <div class="form__row">
                                <mat-form-field floatLabel="always" class="form__field">
                                    <mat-label>O (m<sup>-3</sup>)</mat-label>
                                    <input matInput type="number" formControlName="o">
                                    <mat-hint>atomic oxygen number density per cubic meter</mat-hint>
                                </mat-form-field>
                                <mat-form-field floatLabel="always" class="form__field">
                                    <mat-label>O<sub>2</sub> (m<sup>-3</sup>)</mat-label>
                                    <input matInput type="number" formControlName="o2">
                                    <mat-hint>molecular oxygen number density per cubic meter</mat-hint>
                                </mat-form-field>
                                <mat-form-field floatLabel="always" class="form__field">
                                    <mat-label>N<sub>2</sub> (m<sup>-3</sup>)</mat-label>
                                    <input matInput type="number" formControlName="n2">
                                    <mat-hint>molecular nitrogen number density per cubic meter</mat-hint>
                                </mat-form-field>
                                <mat-form-field floatLabel="always" class="form__field">
                                    <mat-label>He (m<sup>-3</sup>)</mat-label>
                                    <input matInput type="number" formControlName="he">
                                    <mat-hint>helium number density per cubic meter</mat-hint>
                                </mat-form-field>
                                <mat-form-field floatLabel="always" class="form__field">
                                    <mat-label>H (m<sup>-3</sup>)</mat-label>
                                    <input matInput type="number" formControlName="h">
                                    <mat-hint>hydrogen number density per cubic meter</mat-hint>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="form__column">
                        <mat-card-title>Surface Conditions</mat-card-title>
                        <div class="form__row">
                            <mat-form-field floatLabel="always" class="form__field form__field--wide">
                                <mat-label>Energy Accommodation Model</mat-label>
                                <mat-select  formControlName="accommodationModel">
                                    <mat-option *ngFor="let model of models" [value]="model">
                                        {{model}}
                                    </mat-option>
                                </mat-select>
                                <mat-hint>model to use for energy accommodation value</mat-hint>
                                <mat-error *ngIf="modelForm.controls.accommodationModel.invalid">{{getErrorMessage('accommodationModel')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field *ngIf="showEnergyAccommodation" floatLabel="always" class="form__field form__field--wide">
                                <mat-label>Energy Accommodation</mat-label>
                                <input matInput formControlName="energyAccommodation">
                                <mat-hint>alpha</mat-hint>
                                <mat-error *ngIf="modelForm.controls.energyAccommodation.invalid">{{getErrorMessage('energyAccommodation')}}</mat-error>
                            </mat-form-field>
                            <mat-form-field  *ngIf="showSurfaceMass" floatLabel="always" class="form__field">
                                <mat-label>Surface Mass (amu)</mat-label>
                                <input matInput type="number" formControlName="surfaceMass">
                                <mat-hint>surface mass in amu</mat-hint>
                                <mat-error *ngIf="modelForm.controls.surfaceMass.invalid">{{getErrorMessage('surfaceMass')}}</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div class="form__submit">
                    <button mat-raised-button [disabled]="!modelForm.valid" color="primary" type="submit">Submit</button>
                </div>
            </form>
            <div class="form__results">
                <div class="form__result">
                    <mat-card-title>
                        Submission Values <span class="form__invalid" *ngIf="!modelForm.valid">(invalid)</span>
                    </mat-card-title>
                    <pre>
                        {{ payload | json }}
                    </pre>
                    <div *ngIf="invalidFields?.length" class="form__invalid">
                        invalid entries:<span *ngFor="let field of invalidFields; let i = index"> {{ field}}<span *ngIf="i !== invalidFields.length - 1">,</span> </span>
                    </div>
                </div>
                <div class="form__result" [class.form__result--hidden]="!results">
                    <mat-card-title>
                        Results
                    </mat-card-title>
                    <div class="form__result-item" *ngFor="let result of results | keyvalue">
                        <p>
                            <span>
                                <strong *ngIf="resultTranslator[result.key].title">{{ resultTranslator[result.key].title }}</strong>
                                <strong *ngIf="!resultTranslator[result.key].title">{{ result.key }}</strong>:
                                {{ result.value }}
                            </span>
                            <span class="form__result-units" [innerHtml]="resultTranslator[result.key].units"></span>
                        </p>
                    </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Multi Point">
            <div class="form">
                Multi point file upload here.
            </div>
        </mat-tab>
    </mat-tab-group>
</mat-card>
